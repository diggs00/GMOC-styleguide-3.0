@use 'input' as i;
@use '../../../mobile/colors' as c;
@use '../../../mobile/fonts' as f;

.gb-input {
	position: relative;

	%gb-datetime-indicators-visible {
		&::-webkit-datetime-edit {
			opacity: 1;
		}

		&::-webkit-calendar-picker-indicator {
			opacity: 1;
		}
	}

	%gb-datetime-indicators-hidden {
		&::-webkit-datetime-edit {
			opacity: 0;
			overflow: visible;
		}

		&::-webkit-calendar-picker-indicator {
			opacity: 0;
		}
	}

	%gb-text-container {
		align-items: center;
		display: flex;
		flex-direction: row;
	}

	%gb-pw-info-item {
		align-items: center;
		color: c.$gray-1;
		display: flex;
		flex-direction: row;
		font-family: f.$font-family-gmglobal-sans;
		font-size: 14px;
		line-height: 1.33;
		margin: 5px auto 5px 16px;

		.gb-pw-info-text {
			margin-left: 6px;
		}

		.gb-pw-info-icon-check {
			content: url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2214%22%20height%3D%2215%22%20fill%3D%22none%22%3E%3Cg%20opacity%3D%22.9%22%3E%3Ccircle%20cx%3D%227%22%20cy%3D%227.5%22%20r%3D%227%22%20fill%3D%22%234CD960%22%2F%3E%3Cpath%20fill%3D%22%23212121%22%20fill-rule%3D%22evenodd%22%20d%3D%22M9.887%204.728a.525.525%200%200%201%20.857.603l-.038.054L6.73%2010.34c-.179.223-.5.26-.723.092l-.05-.042-2.62-2.512a.525.525%200%200%201%20.677-.8l.05.042L6.27%209.236l3.617-4.508Z%22%20clip-rule%3D%22evenodd%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');
			height: 100%;
			width: 100%;
		}

		.gb-caps-info-icon {
			content: url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2214%22%20height%3D%2215%22%20fill%3D%22none%22%3E%3Cpath%20fill%3D%22%23989898%22%20d%3D%22M7%20.5a6.99%206.99%200%200%200-7%207c0%203.873%203.127%207%207%207s7-3.127%207-7-3.127-7-7-7Z%22%2F%3E%3Cpath%20fill%3D%22%23212121%22%20d%3D%22M8.751%207.517h1.184a.562.562%200%200%200%20.565-.555.54.54%200%200%200-.14-.363L7.429%203.315a.576.576%200%200%200-.855%200L3.641%206.598a.545.545%200%200%200%20.051.78.582.582%200%200%200%20.374.14H5.25v1.711c0%20.171.143.312.318.312h2.865c.175%200%20.318-.14.318-.312V7.517ZM8.433%2010.163H5.568a.316.316%200%200%200-.318.311v1.09c0%20.171.143.311.318.311h2.865c.175%200%20.318-.14.318-.311v-1.09a.316.316%200%200%200-.318-.31Z%22%2F%3E%3C%2Fsvg%3E');
		}

		.gb-pw-info-icon {
			background-color: c.$white;
			border: solid 1px transparent;
			border-radius: 50%;
			display: inline-block;
			height: 14px;
			width: 14px;

			&.valid {
				background-color: c.$success-green;

				/* stylelint-disable-next-line*/
				.gb-pw-info-icon-check {
					display: block;
				}
			}
		}
	}

	.hide {
		display: none;
	}

	label {

		@include i.base-label(f.$font-family-gmglobal-sans, 15px, normal, 22px, auto);

		color: c.$gray-1;
	}

	.clear-input,
	.show-password {
		color: c.$gray-1;
		display: inline-block;
		font-family: f.$font-family-gmglobal-sans;
		font-size: 10px;
		font-weight: f.$font-weight-demi;
		opacity: 1;
		position: absolute;
		right: 3px;
		text-transform: uppercase;
		top: 30px;

		&:hover {
			cursor: pointer;
		}

		&:focus {
			opacity: 1;
		}
	}

	button {
		&.clear-input,
		&.show-password {
			background: none;
			border: 0;
			cursor: pointer;
			line-height: 13px;
			padding: 0;
		}
	}

	.gb-input-label {
		color: c.$gray-1;
		font-size: 18px;
		font-weight: f.$font-weight-normal;
		height: 21px;
		left: 1px;
		line-height: 23px;
		position: absolute;
		top: 20px;

		&.hover {
			color: c.$gray-1;
			display: block;
			font-size: 15px;
			left: 1px;
			line-height: 22.5px;
			text-transform: uppercase;
			top: 0;
		}

		&:focus {
			text-transform: uppercase;
		}
	}	

	&:focus {
		&input {
			&[type='date'] {
				&::-webkit-datetime-edit {
					opacity: 1;
				}

				&::-webkit-calendar-picker-indicator {
					opacity: 1;
				}
			}
		}
	}

	&.form-error {
		.gb-input-label {
			color: c.$gray-1;
		}

		.gb-helper-text-container {
			display: none;
		}

		.gb-pw-info-container {
			display: none;
		}

		input {
			&[type],
			textarea {
				border-bottom: c.$error-red solid 2px;

				&:focus {
					~ .gb-input-label {
						border-bottom: c.$error-red solid 1px;
						color: c.$gray-1;
					}
				}

				border-bottom: c.$error-red solid 1px;

				&:focus {
					border-bottom: c.$error-red solid 1px;
				}

				&:hover {
					border-bottom: c.$error-red solid 1px;
				}
			}
		}

		.gb-error-text-container {
			@extend %gb-text-container;
		}
	}

	.gb-error-text-container {
		display: none;
		margin: 0;
		padding: 8px 8px 0 0;

		.gb-helper-text-icon-container {
			margin-right: 5px;
		}

		.gb-error-text {
			color: c.$error-red;
			font-family: f.$font-family-gmglobal-sans;
			font-size: 12px;
			font-weight: f.$font-family-gmglobal-sans;
			line-height: 18px;
			padding-bottom: 2px;

			&.gb-error-img {
				@include i.inline-svg-img(
					url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2214%22%20height%3D%2214%22%20fill%3D%22none%22%3E%3Cg%20clip-rule%3D%22evenodd%22%3E%3Cpath%20stroke%3D%22%23FF3B30%22%20stroke-width%3D%221.1%22%20d%3D%22M5.701%202.54a1.5%201.5%200%200%201%202.6%200l4.257%207.391a1.5%201.5%200%200%201-1.3%202.25H2.744a1.5%201.5%200%200%201-1.3-2.25L5.7%202.541Z%22%2F%3E%3Cpath%20fill%3D%22%23FF3B30%22%20fill-rule%3D%22evenodd%22%20d%3D%22M7.508%205.732H6.49l.136%202.948h.765l.117-2.948ZM7%2010.097A.51.51%200%201%200%207%209.08a.51.51%200%200%200%200%201.018Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E'),
					14px 14px,
					14px 14px,
					14px,
					14px,
					14px,
					14px,
					3px,
					4px,
					0 5px 0 0
				);
			}
		}
	}

	.gb-pw-info-container {
		.gb-pw-label {
			color: c.$white;
			display: inline;
			font-family: f.$font-family-gmglobal-sans;
			font-size: 14px;
			font-weight: f.$font-weight-bold;
			line-height: 1.43;
			margin: 5px auto 4px 3px;
		}

		.pw-str-lbl {
			color: c.$success-green;
			display: inline;
			font-family: f.$font-family-gmglobal-sans;
			font-size: 14px;

			&.good-pw {
				color: c.$good-pw;
			}
			
			&.weak-pw {
				color: c.$error-red;
			}
		}

		.gb-pw-str-indicator {
			border-radius: 25px;
			border-top: solid 4px c.$success;
			margin: 0 16px;

			&.good-pw {
				border-top-color: c.$amber;
			}

			&.weak-pw {
				border-top-color: c.$error;
			}
		}

		.gb-pw-info-item {
			@extend %gb-pw-info-item;
		}
	}

	.gb-helper-text-icon-container {
		display: inline-block;
		height: 16px;
		margin: 0;
		padding: 0;
		width: 16px;

		.gb-helper-text-icon-image {
			bottom: 3px;
			display: inline-block;
			position: relative;
			vertical-align: middle;
			width: 100%;
		}
	}

	input {
		&::-moz-placeholder {
			color: c.$accent-gray-2;
			font-family: f.$font-family-gmglobal-sans;
			font-size: 18px;
			margin: 3px 0;
		}
		&::placeholder {
			color: c.$accent-gray-2;
			font-family: f.$font-family-gmglobal-sans;
			font-size: 18px;
			margin: 3px 0;
		}

		@include i.base-input(
			transparent,
			transparent,
			c.$gray-1,
			30%,

			f.$font-family-gmglobal-sans,
			18px,
			27px 50px 8px 0,
			1px solid transparent
		);

		&[type],
		textarea {
			border-bottom: 1px solid c.$accent-gray-1;
			border-radius: 8px 8px 0 0;
			color: c.$white;
			font-weight: f.$font-weight-normal;
			height: 56px;
			line-height: 23px;

			&:active {
				border-bottom: 1px solid c.$white;
			}

			&:valid {
				color: c.$white;
			}

			&:focus {
				border: 0 solid transparent;
				border-bottom: solid 1px c.$white;

				~ .gb-input-label {
					color: c.$gray-1;
					display: block;
					font-size: 15px;
					line-height: 22.5px;
					text-transform: uppercase;
					top: 0;
				}

				~ .clear-input {
					opacity: 1;
				}

				~ .show-password {
					opacity: 1;
				}
			}
		}
		/*IOS  This is to override IOS appearance for date input types.*/
		&[type='date'] {
			-moz-appearance: textfield;
			-webkit-appearance: textfield;
			display: block;
			padding-right: 16px;
			text-transform: uppercase;

			&::-webkit-datetime-edit-text {
				padding: 0 6px;
			}

			&::-webkit-datetime-edit-day-field {
				padding-left: 6px;
			}

			&::-webkit-datetime-edit-year-field {
				padding-left: 6px;
			}

			@extend %gb-datetime-indicators-hidden;

			&:focus {
				@extend %gb-datetime-indicators-visible;
			}

			&.valid {
				&:focus {
					&::-webkit-calendar-picker-indicator {
						opacity: 1;
					}
				}

				&::-webkit-datetime-edit {
					opacity: 1;
				}

				&::-webkit-calendar-picker-indicator {
					opacity: 0;
				}
			}
		}
	}

	.gb-helper-text-container {
		margin: 0;
		padding: 8px 8px 0 0;

		@extend %gb-text-container;

		.gb-helper-text-icon-container {
			margin-right: 5px;
		}

		.gb-helper-text {

			color: c.$accent-gray-1;
			font-family: f.$font-family-gmglobal-sans;
			font-size: 12px;
			font-weight: f.$font-weight-normal;
			line-height: 18px;

			&.gb-caps-img {
				@include i.inline-svg-img(
					url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%3E%3Cpath%20fill%3D%22%23373F42%22%20fill-rule%3D%22nonzero%22%20d%3D%22M8%20.222A7.787%207.787%200%200%201%2015.778%208%207.778%207.778%200%200%201%208%2015.778%207.778%207.778%200%200%201%20.222%208%207.778%207.778%200%200%201%208%20.222zm0%201.196a6.582%206.582%200%200%200%200%2013.164A6.591%206.591%200%200%200%2014.582%208%206.582%206.582%200%200%200%208%201.418zm1.14%209.485a.376.376%200%201%201%20.001.752H6.92a.376.376%200%200%201%200-.752h2.22zm-.81-6.776%202.99%203.193a.283.283%200%200%201%20.055.293.252.252%200%200%201-.234.166H9.52v1.977c0%20.311-.237.563-.528.563H7.07c-.291%200-.528-.252-.528-.563V7.779H4.92a.252.252%200%200%201-.234-.166.28.28%200%200%201%20.055-.293l2.992-3.193a.412.412%200%200%201%20.596%200z%22%2F%3E%3C%2Fsvg%3E'),
					16px 16px,
					20px 20px,
					16px,
					16px,
					20px,
					20px,
					3px,
					4px,
					0 5px 0 0
				);
			}
		}
	}

	&.disabled {
		input {
			border: 0 solid c.$accent-gray-2;

			&[type],
			textarea {
				&[disabled] {
					background-color: transparent;
					border-bottom: 1px solid c.$accent-gray-2;
					opacity: .8;
				}
			}
		}

		.gb-helper-text-container {
			visibility: show;
		}

		.gb-input-label,
		.gb-helper-text,
		.show-password {
			color: c.$accent-gray-2;
		}
	}

	&.form-success {
		.gb-helper-text-container {
			.gb-helper-text {
				color: c.$success;
			}
		}
	}

	@media (min-width: 800px) {
		.clear-input,
		.show-password {
			font-size: 10px;
			font-weight: f.$font-weight-demi;
			line-height: 13px;
			right: 3px;
			top: 30px;
		}

		.gb-input-label {
			font-size: 18px;
			top: 20px;

			&.hover {
				font-size: 15px;
				top: 8px;
			}
		}

		.gb-helper-text-icon-container {
			height: 20px;
			width: 20px;

			.gb-helper-text-icon-image {
				bottom: 0;
			}
		}

		.gb-pw-info-container {
			.gb-pw-info-item {
				color: c.$gray-1;
				font-size: 14px;
			}
		}

		input {
			&::-moz-placeholder {
				font-size: 18px;
			}
			&::placeholder {
				font-size: 18px;
			}

			&[type],
			textarea {
				font-size: 18px;
				font-weight: f.$font-weight-normal;
				height: 56px;
				line-height: 1.125rem;
				

				&:focus {
					padding-bottom: 5px;

					~ .gb-input-label {
						font-size: 15px;
						left: 1px;
						top: 8px;
					}
				}
			}

			&[type='date'] {
				padding-right: 16px;
			}
		}

		.gb-helper-text-container {
			.gb-helper-text {
				font-size: 14px;
			}
		}
	}
}

html[dir='rtl'] {
	.gb-input {
		direction: rtl;
		display: flex;
		flex-flow: column wrap;
	}
}
