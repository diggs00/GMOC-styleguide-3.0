@use 'tab-nav' as tn;
@use 'tab-flyout-behavior' as tfb;
@use '../../chevy-ev/colors' as c;
@use '../../chevy/fonts' as f;
@use '../../utils/animations/container-movement' as cm;
@use '../../utils/breakpoints' as bp;

gb-tab-nav,
.gb-tab-nav {
	padding-inline: 40px;

	.content-button-group {
		@include tfb.base-content-button-group();

		@include tn.base-tab-button-group(
			c.$white,
		);

		border-bottom: solid 1px c.$gray-30;
		font-family: f.$font-family-roboto;
		padding-inline-start: 0;
	}

	.content-button {
		@include tfb.base-content-button();

		@include tn.base-tab-button(
			c.$white,
			c.$gray-90,
			12px,
			f.$font-weight-bold,
			40px,
			0,
		);

		margin-block-start: 0;
		padding-inline-end: 13px;

		button {
			font-family: inherit;
			height: 32px;
			line-height: 1.1667;
		}

		&.active {
			button {
				border-bottom: solid 3px c.$chevy-ev-blue-base2;
			}
		}
	}

	.content-container {
		@include tfb.base-content-container();

		@include tn.base-tab-content-container(
			c.$white,
			0,
		);

		.back-button {
			@include tfb.base-compact-content-container-back-button(
				c.$white,
				none,
				c.$grey-dark,
				18px,
				f.$font-weight-normal,
				auto,
				0 30px 0 30px,
			);

			display: none;
			font-family: f.$font-family-louis;
		}

		.stacked-content-title {
			display: none;
		}
	}

	@mixin stacked-tabs() {
		@include tfb.base-compact-content-button-container-parent();

		padding-inline-end: 50px;

		.content-button-group {
			@include tfb.base-compact-content-button-group();

			@include tn.base-tab-button-group(
				c.$white,
			);
		}

		.content-button {
			@include tfb.base-compact-content-button();

			@include tn.base-tab-button(
				c.$white,
				c.$grey-dark,
				14px,
				f.$font-weight-bold,
				auto,
				20px,
			);

			button {
				line-height: 1.28578;
			}

			border-bottom: 1px solid c.$grey-mid;

			&::after {
				border-bottom: 6px solid transparent;
				border-left: 8px solid c.$chevy-ev-grey;
				border-top: 6px solid transparent;
				content: '';
				position: absolute;
				right: 4.375rem;
			}
		}

		.content-container {
			@include cm.slide-left-right(100%);
			@include tfb.base-compact-content-container();

			padding-top: 61px;


			.back-button {
				display: block;
				left: 0;
				padding: 32px 0 5px;
				position: fixed;
				top: 0;
				width: 100%;
				z-index: 1;

				&::before {
					content: url('data:image/svg+xml,%3Csvg%20width%3D%229%22%20height%3D%2216%22%20viewBox%3D%220%200%209%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M8%2015L1%208L8%201%22%20stroke%3D%22%23373637%22%20stroke-width%3D%221.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%3C%2Fsvg%3E');
					height: 14px;
					inset-inline-start: 4px;
					left: 25px;
					position: fixed;
					top: 30px;
					width: 7px;
				}

				/* stylelint-disable-next-line*/
				.back-button-label {
					color: c.$grey-dark;
					font-family: f.$font-family-louis;
					font-size: 18px;
					letter-spacing: .72px;
					line-height: 1.285;
					text-align: center;
				}
			}

			/* Overriding container movement properties so container content appears over content below it.*/
			&.open,
			&.opening,
			&.closing {
				position: fixed;
				z-index: 1;
			}
		}
	}

	@include bp.small-only {
		&.gb-stacked-sm {
			@include stacked-tabs;
		}
	}

	@include bp.medium-only {
		&.gb-stacked-med {
			@include stacked-tabs;
		}
	}

	@include bp.large-and-above {
		&.gb-stacked-lg {
			@include stacked-tabs;
		}
	}
}
